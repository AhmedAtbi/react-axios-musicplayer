{"ast":null,"code":"import _classCallCheck from \"/Users/ahmedatbi/Documents/react-project/React-Music-Player-master/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/ahmedatbi/Documents/react-project/React-Music-Player-master/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/ahmedatbi/Documents/react-project/React-Music-Player-master/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/ahmedatbi/Documents/react-project/React-Music-Player-master/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/ahmedatbi/Documents/react-project/React-Music-Player-master/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/ahmedatbi/Documents/react-project/React-Music-Player-master/src/containers/Player/Player.js\";\nimport React, { Component } from \"react\";\nimport styles from \"./Player.module.css\";\nimport Title from \"../../components/Title/Title\";\nimport Button from \"../../components/Button/Button\";\nimport ImageTile from \"../../components/ImageTile/ImageTile\";\nimport ArtistName from \"../../components/ArtistName/ArtistName\";\nimport DurationBar from \"../../components/DurationBar/DurationBar\";\nimport { CSSTransition } from \"react-transition-group\";\nimport Axios from \"axios\";\nimport SongList from \"../SongList/SongList\";\n\nvar Player =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Player, _Component);\n\n  //Initialize variables and state\n  function Player(props) {\n    var _this;\n\n    _classCallCheck(this, Player);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Player).call(this, props));\n\n    _this.initializeSongLengthFunction = function () {\n      if (_this.state.currentSong.songURL) {\n        var duration = _this.audioComponent.audio.duration;\n        var seconds = Math.floor(duration % 60);\n        var minutes = Math.floor(duration / 60 % 60);\n        return _this.songLength[0].innerHTML = (minutes < 10 ? \"0\" + minutes : minutes) + \":\" + (seconds < 10 ? \"0\" + seconds : seconds);\n      }\n    };\n\n    _this.togglePlayModeHandler = function () {\n      _this.setState({\n        playIsToggled: !_this.state.playIsToggled\n      });\n\n      _this.state.playIsToggled ? _this.audioComponent.audio.pause() : _this.audioComponent.audio.play();\n    };\n\n    _this.toggleMuteHandler = function () {\n      return _this.state.muteIsToggled ? _this.audioComponent.audio.muted = false : _this.audioComponent.audio.muted = true;\n    };\n\n    _this.backwardSongHandler = function () {\n      //Checks if this is not the first song on the list\n      if (_this.state.currentSongIndex > 0) {\n        var currentIndex = _this.state.currentSongIndex; //If shuffle is toggled, Randomize a song\n\n        if (_this.state.shuffleIsToggled) {\n          currentIndex = Math.floor(Math.random() * _this.state.songArray.length);\n        } else {\n          currentIndex--;\n        }\n\n        _this.switchSongHandler(currentIndex);\n      }\n    };\n\n    _this.forwardSongHandler = function () {\n      //Checks if the current song is not the last song on the list\n      if (_this.state.currentSongIndex <= _this.state.songArray.length - 1) {\n        var currentIndex = _this.state.currentSongIndex; //Checks if shuffle is toggled and if so, randomizes a song index\n\n        if (_this.state.shuffleIsToggled) {\n          currentIndex = Math.floor(Math.random() * _this.state.songArray.length);\n        } //If this is the last song on the list and repeat is on, reset the current index\n        else if (_this.state.currentSongIndex === _this.state.songArray.length - 1 && _this.state.repeatIsToggled) {\n            currentIndex = 0; //If it's not the last song, add one to the current index\n          } else if (_this.state.currentSongIndex < _this.state.songArray.length - 1) {\n            currentIndex++;\n          }\n\n        _this.switchSongHandler(currentIndex);\n      }\n    };\n\n    _this.switchSongHandler = function (index) {\n      _this.setState({\n        currentSongIndex: index,\n        currentSong: _this.state.songArray[index]\n      });\n    };\n\n    _this.switchSongFromList = function (event) {\n      _this.setState({\n        listIsToggled: false\n      });\n\n      _this.switchSongHandler(event.currentTarget.id);\n    };\n\n    _this.randomizeSong = function () {\n      var currentIndex = Math.floor(Math.random() * _this.state.songArray.length);\n\n      _this.switchSongHandler(currentIndex);\n    };\n\n    _this.togglePlayerOptions = function (modeToggled) {\n      switch (modeToggled) {\n        case \"shuffle\":\n          return _this.setState({\n            shuffleIsToggled: !_this.state.shuffleIsToggled\n          });\n\n        case \"mute\":\n          _this.setState({\n            muteIsToggled: !_this.state.muteIsToggled\n          });\n\n          return _this.toggleMuteHandler();\n\n        case \"list\":\n          return _this.setState({\n            listIsToggled: !_this.state.listIsToggled,\n            playIsToggled: false\n          });\n\n        case \"repeat\":\n          return _this.setState({\n            repeatIsToggled: !_this.state.repeatIsToggled\n          });\n\n        default:\n          return;\n      }\n    };\n\n    _this.state = {\n      songArray: null,\n      currentSong: {},\n      currentSongIndex: 0,\n      shuffleIsToggled: false,\n      repeatIsToggled: false,\n      muteIsToggled: false,\n      playIsToggled: false,\n      listIsToggled: false\n    };\n    _this.audioComponent = React.createRef();\n    _this.currentTimeElement = document.getElementsByClassName(\"current-time\");\n    _this.songLength = document.getElementsByClassName(\"total-time\");\n    return _this;\n  } //Calculate the minutes and seconds using song duration, output a formatted duration into the .total-time element\n\n\n  _createClass(Player, [{\n    key: \"componentDidMount\",\n    //Initialize song length rendering and fetch songs information from firebase\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      Axios.get(\"https://music-app-3a097-default-rtdb.firebaseio.com/.json\").then(function (response) {\n        var songs = response.data; //Assign the data that was fetched from the server and initialize the first song\n\n        _this2.setState({\n          songArray: songs,\n          currentSong: songs[_this2.state.currentSongIndex]\n        }); //Prevent audio from playing after load\n\n\n        _this2.audioComponent.audio.pause();\n      }).catch(function (error) {\n        console.log(error);\n      }); //Calculate the length of the first song and display on load\n\n      this.initializeSongLengthFunction();\n    } //Toggle the playing state on click and play/pause the audio\n\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      var togglePlayIcon = this.state.playIsToggled ? \"fas fa-pause fa-2x\" : \"fas fa-play fa-2x\";\n      var playerTitle = this.state.listIsToggled ? \"Choose A Song\" : \"Now Playing\";\n\n      if (this.state.currentSong.songURL) {\n        return React.createElement(\"div\", {\n          style: {\n            width: \"100%\"\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 160\n          },\n          __self: this\n        }, React.createElement(CSSTransition, {\n          in: true,\n          appear: true,\n          timeout: 300,\n          classNames: \"fadeTopBar\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 161\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: styles.TopBar,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 167\n          },\n          __self: this\n        }, this.state.listIsToggled ? null : React.createElement(Button, {\n          isToggled: this.state.muteIsToggled,\n          toggledType: \"mute\",\n          click: function click(modeToggled) {\n            return _this3.togglePlayerOptions(modeToggled);\n          },\n          type: \"ui-icon\",\n          icon: \"fas fa-volume-mute fa-2x\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 169\n          },\n          __self: this\n        }), React.createElement(CSSTransition, {\n          in: this.state.listIsToggled,\n          timeout: 300,\n          classNames: \"textMove\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 177\n          },\n          __self: this\n        }, React.createElement(Title, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 182\n          },\n          __self: this\n        }, playerTitle)), React.createElement(Button, {\n          isToggled: this.state.listIsToggled,\n          toggledType: \"list\",\n          click: function click(modeToggled) {\n            return _this3.togglePlayerOptions(modeToggled);\n          },\n          type: \"ui-icon\",\n          icon: \"fas fa-list-ul fa-2x\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 184\n          },\n          __self: this\n        }))), React.createElement(React.Fragment, null, this.state.listIsToggled ? React.createElement(SongList, {\n          click: function click(event) {\n            return _this3.switchSongFromList(event);\n          },\n          songArray: this.state.songArray,\n          isOpen: this.state.listIsToggled,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 195\n          },\n          __self: this\n        }) : React.createElement(React.Fragment, null, React.createElement(CSSTransition, {\n          in: true,\n          appear: true,\n          timeout: 300,\n          classNames: \"fade\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 202\n          },\n          __self: this\n        }, React.createElement(ImageTile, {\n          src: this.state.currentSong.songIMG,\n          alt: \"Song Cover\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 208\n          },\n          __self: this\n        })), React.createElement(CSSTransition, {\n          in: true,\n          appear: true,\n          timeout: 300,\n          classNames: \"fadeTopBar\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 214\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          style: {\n            transitionDelay: \"400ms\"\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 220\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: styles.SongInfo,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 221\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 222\n          },\n          __self: this\n        }, React.createElement(Title, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 223\n          },\n          __self: this\n        }, this.state.currentSong.songName), React.createElement(ArtistName, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 224\n          },\n          __self: this\n        }, this.state.currentSong.artistName))), React.createElement(DurationBar, {\n          isShuffleOn: this.state.shuffleIsToggled,\n          randomizeSong: this.randomizeSong,\n          onEnd: this.forwardSongHandler,\n          onDragIndicator: this.togglePlayModeHandler,\n          audioComponent: this.audioComponent,\n          initializeTime: this.initializeSongLengthFunction,\n          audioRef: function audioRef(el) {\n            return _this3.audioComponent = el;\n          },\n          songURL: this.state.currentSong.songURL,\n          playing: this.state.playIsToggled,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 232\n          },\n          __self: this\n        }), React.createElement(\"div\", {\n          className: styles.PlayerControls,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 244\n          },\n          __self: this\n        }, React.createElement(Button, {\n          isToggled: this.state.shuffleIsToggled,\n          toggledType: \"shuffle\",\n          click: function click(modeToggled) {\n            return _this3.togglePlayerOptions(modeToggled);\n          },\n          type: \"player-flow-control\",\n          icon: \"fas fa-random\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 245\n          },\n          __self: this\n        }), React.createElement(Button, {\n          click: this.backwardSongHandler,\n          type: \"player-switch-control\",\n          icon: \"fas fa-step-backward\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 254\n          },\n          __self: this\n        }), React.createElement(Button, {\n          click: this.togglePlayModeHandler,\n          type: \"player-play-control\",\n          icon: togglePlayIcon,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 259\n          },\n          __self: this\n        }), React.createElement(Button, {\n          click: this.forwardSongHandler,\n          type: \"player-switch-control\",\n          icon: \"fas fa-step-forward\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 264\n          },\n          __self: this\n        }), React.createElement(Button, {\n          isToggled: this.state.repeatIsToggled,\n          toggledType: \"repeat\",\n          click: function click(modeToggled) {\n            return _this3.togglePlayerOptions(modeToggled);\n          },\n          type: \"player-flow-control\",\n          icon: \"fas fa-redo\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 269\n          },\n          __self: this\n        })))))));\n      } else {\n        return React.createElement(\"div\", {\n          className: \"loader\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 287\n          },\n          __self: this\n        }, \"Loading...\");\n      }\n    }\n  }]);\n\n  return Player;\n}(Component);\n\nexport default Player;","map":{"version":3,"sources":["/Users/ahmedatbi/Documents/react-project/React-Music-Player-master/src/containers/Player/Player.js"],"names":["React","Component","styles","Title","Button","ImageTile","ArtistName","DurationBar","CSSTransition","Axios","SongList","Player","props","initializeSongLengthFunction","state","currentSong","songURL","duration","audioComponent","audio","seconds","Math","floor","minutes","songLength","innerHTML","togglePlayModeHandler","setState","playIsToggled","pause","play","toggleMuteHandler","muteIsToggled","muted","backwardSongHandler","currentSongIndex","currentIndex","shuffleIsToggled","random","songArray","length","switchSongHandler","forwardSongHandler","repeatIsToggled","index","switchSongFromList","event","listIsToggled","currentTarget","id","randomizeSong","togglePlayerOptions","modeToggled","createRef","currentTimeElement","document","getElementsByClassName","get","then","response","songs","data","catch","error","console","log","togglePlayIcon","playerTitle","width","TopBar","songIMG","transitionDelay","SongInfo","songName","artistName","el","PlayerControls"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport styles from \"./Player.module.css\";\r\nimport Title from \"../../components/Title/Title\";\r\nimport Button from \"../../components/Button/Button\";\r\nimport ImageTile from \"../../components/ImageTile/ImageTile\";\r\nimport ArtistName from \"../../components/ArtistName/ArtistName\";\r\nimport DurationBar from \"../../components/DurationBar/DurationBar\";\r\nimport { CSSTransition } from \"react-transition-group\";\r\nimport Axios from \"axios\";\r\nimport SongList from \"../SongList/SongList\";\r\nclass Player extends Component {\r\n  //Initialize variables and state\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      songArray: null,\r\n      currentSong: {},\r\n      currentSongIndex: 0,\r\n      shuffleIsToggled: false,\r\n      repeatIsToggled: false,\r\n      muteIsToggled: false,\r\n      playIsToggled: false,\r\n      listIsToggled: false,\r\n    };\r\n    this.audioComponent = React.createRef();\r\n    this.currentTimeElement = document.getElementsByClassName(\"current-time\");\r\n    this.songLength = document.getElementsByClassName(\"total-time\");\r\n  }\r\n  //Calculate the minutes and seconds using song duration, output a formatted duration into the .total-time element\r\n  initializeSongLengthFunction = () => {\r\n    if (this.state.currentSong.songURL) {\r\n      let duration = this.audioComponent.audio.duration;\r\n      const seconds = Math.floor(duration % 60);\r\n      const minutes = Math.floor((duration / 60) % 60);\r\n      return (this.songLength[0].innerHTML =\r\n        (minutes < 10 ? \"0\" + minutes : minutes) +\r\n        \":\" +\r\n        (seconds < 10 ? \"0\" + seconds : seconds));\r\n    }\r\n  };\r\n\r\n  //Initialize song length rendering and fetch songs information from firebase\r\n  componentDidMount() {\r\n    Axios.get(\"https://music-app-3a097-default-rtdb.firebaseio.com/.json\")\r\n      .then((response) => {\r\n        const songs = response.data;\r\n        //Assign the data that was fetched from the server and initialize the first song\r\n        this.setState({\r\n          songArray: songs,\r\n          currentSong: songs[this.state.currentSongIndex],\r\n        });\r\n        //Prevent audio from playing after load\r\n        this.audioComponent.audio.pause();\r\n      })\r\n      .catch(function (error) {\r\n        console.log(error);\r\n      });\r\n    //Calculate the length of the first song and display on load\r\n    this.initializeSongLengthFunction();\r\n  }\r\n  //Toggle the playing state on click and play/pause the audio\r\n  togglePlayModeHandler = () => {\r\n    this.setState({ playIsToggled: !this.state.playIsToggled });\r\n    this.state.playIsToggled\r\n      ? this.audioComponent.audio.pause()\r\n      : this.audioComponent.audio.play();\r\n  };\r\n  //Toggling audio mute according to muteIsToggled state\r\n  toggleMuteHandler = () => {\r\n    return this.state.muteIsToggled\r\n      ? (this.audioComponent.audio.muted = false)\r\n      : (this.audioComponent.audio.muted = true);\r\n  };\r\n  //Switch the song back\r\n  backwardSongHandler = () => {\r\n    //Checks if this is not the first song on the list\r\n    if (this.state.currentSongIndex > 0) {\r\n      let currentIndex = this.state.currentSongIndex;\r\n      //If shuffle is toggled, Randomize a song\r\n      if (this.state.shuffleIsToggled) {\r\n        currentIndex = Math.floor(Math.random() * this.state.songArray.length);\r\n      } else {\r\n        currentIndex--;\r\n      }\r\n      this.switchSongHandler(currentIndex);\r\n    }\r\n  };\r\n  //Switch the song forward\r\n  forwardSongHandler = () => {\r\n    //Checks if the current song is not the last song on the list\r\n    if (this.state.currentSongIndex <= this.state.songArray.length - 1) {\r\n      let currentIndex = this.state.currentSongIndex;\r\n      //Checks if shuffle is toggled and if so, randomizes a song index\r\n      if (this.state.shuffleIsToggled) {\r\n        currentIndex = Math.floor(Math.random() * this.state.songArray.length);\r\n      } //If this is the last song on the list and repeat is on, reset the current index\r\n      else if (\r\n        this.state.currentSongIndex === this.state.songArray.length - 1 &&\r\n        this.state.repeatIsToggled\r\n      ) {\r\n        currentIndex = 0;\r\n        //If it's not the last song, add one to the current index\r\n      } else if (\r\n        this.state.currentSongIndex <\r\n        this.state.songArray.length - 1\r\n      ) {\r\n        currentIndex++;\r\n      }\r\n      this.switchSongHandler(currentIndex);\r\n    }\r\n  };\r\n  //Universal function to switch the song via state and reassign the current song index\r\n  switchSongHandler = (index) => {\r\n    this.setState({\r\n      currentSongIndex: index,\r\n      currentSong: this.state.songArray[index],\r\n    });\r\n  };\r\n  //Upon a click on each of the list items, close the list and switch to the chosen song\r\n  switchSongFromList = (event) => {\r\n    this.setState({ listIsToggled: false });\r\n    this.switchSongHandler(event.currentTarget.id);\r\n  };\r\n  //Randomize song and switch, used to trigger shuffle on songs endings\r\n  randomizeSong = () => {\r\n    let currentIndex = Math.floor(Math.random() * this.state.songArray.length);\r\n    this.switchSongHandler(currentIndex);\r\n  };\r\n\r\n  //Accepts the mode of the clicked button, toggles it and invoking the necessary functions related to the mode\r\n  togglePlayerOptions = (modeToggled) => {\r\n    switch (modeToggled) {\r\n      case \"shuffle\":\r\n        return this.setState({\r\n          shuffleIsToggled: !this.state.shuffleIsToggled,\r\n        });\r\n      case \"mute\":\r\n        this.setState({ muteIsToggled: !this.state.muteIsToggled });\r\n        return this.toggleMuteHandler();\r\n      case \"list\":\r\n        return this.setState({\r\n          listIsToggled: !this.state.listIsToggled,\r\n          playIsToggled: false,\r\n        });\r\n      case \"repeat\":\r\n        return this.setState({ repeatIsToggled: !this.state.repeatIsToggled });\r\n      default:\r\n        return;\r\n    }\r\n  };\r\n  render() {\r\n    let togglePlayIcon = this.state.playIsToggled\r\n      ? \"fas fa-pause fa-2x\"\r\n      : \"fas fa-play fa-2x\";\r\n    let playerTitle = this.state.listIsToggled\r\n      ? \"Choose A Song\"\r\n      : \"Now Playing\";\r\n    if (this.state.currentSong.songURL) {\r\n      return (\r\n        <div style={{ width: \"100%\" }}>\r\n          <CSSTransition\r\n            in={true}\r\n            appear={true}\r\n            timeout={300}\r\n            classNames=\"fadeTopBar\"\r\n          >\r\n            <div className={styles.TopBar}>\r\n              {this.state.listIsToggled ? null : (\r\n                <Button\r\n                  isToggled={this.state.muteIsToggled}\r\n                  toggledType=\"mute\"\r\n                  click={(modeToggled) => this.togglePlayerOptions(modeToggled)}\r\n                  type=\"ui-icon\"\r\n                  icon=\"fas fa-volume-mute fa-2x\"\r\n                />\r\n              )}\r\n              <CSSTransition\r\n                in={this.state.listIsToggled}\r\n                timeout={300}\r\n                classNames=\"textMove\"\r\n              >\r\n                <Title>{playerTitle}</Title>\r\n              </CSSTransition>\r\n              <Button\r\n                isToggled={this.state.listIsToggled}\r\n                toggledType=\"list\"\r\n                click={(modeToggled) => this.togglePlayerOptions(modeToggled)}\r\n                type=\"ui-icon\"\r\n                icon=\"fas fa-list-ul fa-2x\"\r\n              />\r\n            </div>\r\n          </CSSTransition>\r\n          <>\r\n            {this.state.listIsToggled ? (\r\n              <SongList\r\n                click={(event) => this.switchSongFromList(event)}\r\n                songArray={this.state.songArray}\r\n                isOpen={this.state.listIsToggled}\r\n              />\r\n            ) : (\r\n              <>\r\n                <CSSTransition\r\n                  in={true}\r\n                  appear={true}\r\n                  timeout={300}\r\n                  classNames=\"fade\"\r\n                >\r\n                  <ImageTile\r\n                    src={this.state.currentSong.songIMG}\r\n                    alt=\"Song Cover\"\r\n                  />\r\n                </CSSTransition>\r\n\r\n                <CSSTransition\r\n                  in={true}\r\n                  appear={true}\r\n                  timeout={300}\r\n                  classNames=\"fadeTopBar\"\r\n                >\r\n                  <div style={{ transitionDelay: \"400ms\" }}>\r\n                    <div className={styles.SongInfo}>\r\n                      <div>\r\n                        <Title>{this.state.currentSong.songName}</Title>\r\n                        <ArtistName>\r\n                          {this.state.currentSong.artistName}\r\n                        </ArtistName>\r\n                      </div>\r\n                    </div>\r\n\r\n                    {/*The duration bar holds inside the H5AudioComponent that is being used as the audio managing component.\r\n         This component is responsible for the audio playing, calculating and displaying durations and applying the seeking function according to the indicator*/}\r\n                    <DurationBar\r\n                      isShuffleOn={this.state.shuffleIsToggled}\r\n                      randomizeSong={this.randomizeSong}\r\n                      onEnd={this.forwardSongHandler}\r\n                      onDragIndicator={this.togglePlayModeHandler}\r\n                      audioComponent={this.audioComponent}\r\n                      initializeTime={this.initializeSongLengthFunction}\r\n                      audioRef={(el) => (this.audioComponent = el)}\r\n                      songURL={this.state.currentSong.songURL}\r\n                      playing={this.state.playIsToggled}\r\n                    />\r\n\r\n                    <div className={styles.PlayerControls}>\r\n                      <Button\r\n                        isToggled={this.state.shuffleIsToggled}\r\n                        toggledType=\"shuffle\"\r\n                        click={(modeToggled) =>\r\n                          this.togglePlayerOptions(modeToggled)\r\n                        }\r\n                        type=\"player-flow-control\"\r\n                        icon=\"fas fa-random\"\r\n                      />\r\n                      <Button\r\n                        click={this.backwardSongHandler}\r\n                        type=\"player-switch-control\"\r\n                        icon=\"fas fa-step-backward\"\r\n                      />\r\n                      <Button\r\n                        click={this.togglePlayModeHandler}\r\n                        type=\"player-play-control\"\r\n                        icon={togglePlayIcon}\r\n                      />\r\n                      <Button\r\n                        click={this.forwardSongHandler}\r\n                        type=\"player-switch-control\"\r\n                        icon=\"fas fa-step-forward\"\r\n                      />\r\n                      <Button\r\n                        isToggled={this.state.repeatIsToggled}\r\n                        toggledType=\"repeat\"\r\n                        click={(modeToggled) =>\r\n                          this.togglePlayerOptions(modeToggled)\r\n                        }\r\n                        type=\"player-flow-control\"\r\n                        icon=\"fas fa-redo\"\r\n                      />\r\n                    </div>\r\n                  </div>\r\n                </CSSTransition>\r\n              </>\r\n            )}\r\n          </>\r\n        </div>\r\n      );\r\n    } else {\r\n      return <div className=\"loader\">Loading...</div>;\r\n    }\r\n  }\r\n}\r\n\r\nexport default Player;\r\n"]},"metadata":{},"sourceType":"module"}